# Configuração do Mosquitto MQTT Broker
# Para comunicação com dispositivos IoT da casa inteligente

# Configurações básicas
listener 1883
protocol mqtt

# Configurações de segurança
allow_anonymous false
password_file /mosquitto/config/passwd

# Configurações de persistência
persistence true
persistence_location /mosquitto/data/

# Configurações de logs
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning
log_type notice
log_type information
log_type debug

# Configurações de conexão
max_connections 1000
max_inflight_messages 100
max_queued_messages 1000

# Configurações de tempo
keepalive_interval 60
message_size_limit 268435456

# Configurações de tópicos
topic casa/+/+ 1
topic casa/seguranca/+ 2
topic casa/energia/+ 1
topic casa/clima/+ 1
topic casa/iluminacao/+ 1

# Configurações de bridge (se necessário)
# bridge_protocol_version mqttv311
# bridge_insecure false

# Configurações de WebSocket
listener 9001
protocol websockets

# Configurações de SSL/TLS (para produção)
# listener 8883
# protocol mqtt
# cafile /mosquitto/ssl/ca.crt
# certfile /mosquitto/ssl/server.crt
# keyfile /mosquitto/ssl/server.key
# require_certificate true

# Configurações de autenticação
acl_file /mosquitto/config/acl.conf

# Configurações de retenção
retain_available true
max_retained_messages 1000

# Configurações de QoS
upgrade_outgoing_qos false

# Configurações de heartbeat
heartbeat_interval 60

# Configurações de autodiscovery Home Assistant
# Permite descoberta automática de dispositivos
allow_zero_length_clientid true
auto_id_prefix casa_inteligente_
